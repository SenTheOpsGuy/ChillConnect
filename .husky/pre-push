#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Get current branch
protected_branch='main'
current_branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$current_branch" = "$protected_branch" ]; then
  echo "ğŸ” Running comprehensive tests before pushing to $protected_branch..."
  
  # Run full test suite
  npm run test
  
  echo "âœ… All tests passed! Ready to push to $protected_branch."
else
  echo "ğŸ“‹ Running basic checks for feature branch..."
  npm run lint
fi

echo "âœ… Pre-push checks completed!"